
use sora;

DROP TABLE if exists record;
DROP TABLE if exists role;
DROP TABLE if exists player;
DROP TABLE if exists hero_equip;
DROP TABLE if exists hero_soldiers;
DROP TABLE if exists hero_actions;
DROP TABLE if exists hero;
DROP TABLE if exists soldier;
DROP TABLE if exists action;


CREATE TABLE IF NOT EXISTS player (
	id BIGINT AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(64),
	server VARCHAR(64)
);


CREATE TABLE IF NOT EXISTS record (
	id BIGINT AUTO_INCREMENT PRIMARY KEY,
	player1 bigint not null,
	player2 bigint not null,
	score1 integer,
	score2 integer,
	season_id bigint not null,
	record_group integer,
	stage integer,
	map integer,
	match_time timestamp not null,
	video_id bigint
);

CREATE TABLE IF NOT EXISTS season (
	id BIGINT AUTO_INCREMENT PRIMARY KEY,
	number integer,
	match_type VARCHAR(64),
	status integer, 
	start_time timestamp
);

CREATE TABLE IF NOT EXISTS video (
	id bigint AUTO_INCREMENT PRIMARY KEY,
	video_type integer,
	info VARCHAR(512)
);

CREATE TABLE IF NOT EXISTS role (
	id bigint AUTO_INCREMENT PRIMARY KEY,
	season_id bigint not null,
	player_id bigint not null,
	name VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS hero (
	id bigint AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(255),
	life integer,
	attack integer,
	intel integer,
	physic_def integer,
	magic_def integer,
	tech integer,
	soldier_life_inc integer,
	soldier_attack_inc integer,
	soldier_physic_def_inc integer,
	soldier_magic_def_inc integer,
	skills VARCHAR(4096),
	is_physic tinyint(1),
	is_woman tinyint(1),
	type integer,
	default_soldier bigint
);

create table hero_soldiers (hero_id bigint not null, soldiers_id bigint not null);

create table soldier (
	id bigint generated by default as identity, 
	name VARCHAR(255),
	attack integer not null, 
	life integer not null, 
	magic_def integer not null, 
	physic_def integer not null, 
	soldier_type integer not null,
	skills VARCHAR(4096),
	is_physic tinyint(1),
	primary key (id)
);

 create table hero_equip(
	 id bigint AUTO_INCREMENT PRIMARY KEY,
	 attack_inc integer not null,
	 attack_skill integer not null, 
	 attack_jjc integer not null,
	 life_inc integer not null, 
	 life_skill integer not null, 
	 life_jjc integer not null, 
	 magic_def_inc integer not null, 
	 magic_def_skill integer not null, 
	 magic_def_jjc integer not null, 
	 physic_def_inc integer not null, 
	 physic_def_skill integer not null, 
	 physic_def_jjc integer not null, 
	 intel_inc integer not null, 
	 intel_skill integer not null, 
	 intel_jjc integer not null, 
	 tech_inc integer not null,
	 tech_skill integer not null,
	 tech_jjc integer not null,
	 critical_prob_inc integer,
	 critical_damage_inc integer, 
	 critical_prob_dec integer,  
	 critical_damage_dec integer,
	 hero_id bigint
 );

create table action (
	id bigint generated by default as identity, 
	coefficient double, 
	direct tinyint(1), 
	hit_time integer, 
	name varchar(255), 
	range integer, 
	skills varchar(255), 
	is_physic tinyint(1),
	primary key (id));

create table hero_actions (hero_id bigint not null, actions_id bigint not null);


INSERT INTO player(name, server) VALUES
('朱老板','羁绊之地'),
('黑豆','羁绊之地'),
('兔兔和土豆','羁绊之地'),
('兔子白','羁绊之地'),
('长腿','羁绊之地'),
('神奇白','卡尔萨斯'),
('上官敏儿','米拉港' ),
('特工','羁绊之地'),
('琳雪','羁绊之地'),
('不是山谷','羁绊之地');

INSERT INTO hero(id, name, life, attack, intel, physic_def, magic_def, tech, soldier_life_inc, soldier_attack_inc,  
soldier_physic_def_inc, soldier_magic_def_inc, is_physic, is_woman, default_soldier, type, skills) VALUES
(1,'帕希尔',3548,271,520,258,312,104,30,35,15,20,0,1,1,7,'1,1001,1101'),
(2,'托娃',4168,527,240,305,302,166,30,30,40,15,1,1,3,5,'2,1001,1101'),
(63,'古巨拉',5442,412,247,317,285,124,40,15,35,10,1,0,4,4,'3011,1101'),
(62,'泽瑞达',3723,534,240,288,281,331,10,40,10,40,1,1,5,7,'3,4,301,1002,1101')
;


INSERT INTO soldier(id, name, life ,attack, physic_def,  magic_def, soldier_type, is_physic, skills) VALUES
(1, '魔女', 583, 677, 297, 468, 8, 0, '2001'),
(2, '魔晶术士', 723, 630, 375,328, 8, 0, '2002'),
(3, '皇家狮鹫', 677,754, 344,390, 5, 1, '2003'),
(4, '龙虾巨兽', 723,630, 437,282, 4, 1, '2004'),
(5, '火焰骷髅弓手', 609,706, 359,342, 9, 1, '')
;


INSERT INTO hero_soldiers(hero_id, soldiers_id) VALUES
(1, 1),(1, 2),(2, 3),(62,5),(63,4);

INSERT INTO hero_equip(hero_id,life_inc, attack_inc, intel_inc, physic_def_inc,  magic_def_inc, tech_inc, life_skill, attack_skill, intel_skill, physic_def_skill, magic_def_skill, tech_skill, life_jjc, intel_jjc, attack_jjc,  physic_def_jjc, magic_def_jjc, tech_jjc,critical_prob_inc, critical_damage_inc, critical_prob_dec,  critical_damage_dec) VALUES
(1,  3251,14,456,187,59,0,   15,0,8,10,0,0,     452,0,60,39,0,0,   0,0,18,30),
(2,  2526,513,12,220,59,15,   10,18,0,10,0,0,   412,58,0,45,0,0,   0,0,20,30),
(62,  2725,479,21,145,69,82,   5,18,0,10,0,0,    405,59,0,0,0,67,   9,18,0,0),
(63,  4293,96,0,304,227,0,    10,5,5,23,13,5,   0,0,0,45,43,65,   0,0,20,30);

INSERT INTO action(id, name, coefficient, direct, range,  hit_time, is_physic, skills) VALUES 
(10001,'物理普攻',1,0,0,1500,1,''),
(10002,'魔法普攻',1,0,0,1500,0,''),
(1,'嗜梦',1.5,0,2,500,0,'1601'),
(2,'绝命一击',1.4,1,2,300,1,'1602'),
(3,'优势打击',1.5,0,1,1300,1,'1603'),
(4,'自由之刃',1.4,0,1,1300,1,'1604')
;


INSERT INTO hero_actions(hero_id, actions_id) VALUES
(1, 1),(1, 10002),(62,10001),(62,2),(2,10001),(2,3);










