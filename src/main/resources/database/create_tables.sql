
use sora;

DROP TABLE if exists record;
DROP TABLE if exists role;
DROP TABLE if exists player;
DROP TABLE if exists hero_equip;
DROP TABLE if exists hero_soldiers;
DROP TABLE if exists hero_actions;
DROP TABLE if exists hero;
DROP TABLE if exists soldier;
DROP TABLE if exists action;

DROP TABLE if exists equip;
DROP TABLE if exists equip_type;
DROP TABLE if exists hero_equips;
DROP TABLE if exists hero_equip_types;

CREATE TABLE IF NOT EXISTS player (
	id BIGINT AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(64),
	server VARCHAR(64)
);


CREATE TABLE IF NOT EXISTS record (
	id BIGINT AUTO_INCREMENT PRIMARY KEY,
	player1 bigint not null,
	player2 bigint not null,
	score1 integer,
	score2 integer,
	season_id bigint not null,
	record_group integer,
	stage integer,
	map integer,
	match_time timestamp not null,
	video_id bigint
);

CREATE TABLE IF NOT EXISTS season (
	id BIGINT AUTO_INCREMENT PRIMARY KEY,
	number integer,
	match_type VARCHAR(64),
	status integer, 
	start_time timestamp
);

CREATE TABLE IF NOT EXISTS video (
	id bigint AUTO_INCREMENT PRIMARY KEY,
	video_type integer,
	info VARCHAR(512)
);

CREATE TABLE IF NOT EXISTS role (
	id bigint AUTO_INCREMENT PRIMARY KEY,
	season_id bigint not null,
	player_id bigint not null,
	name VARCHAR(255)
);

CREATE TABLE IF NOT EXISTS hero (
	id bigint AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(255),
	life integer,
	attack integer,
	intel integer,
	physic_def integer,
	magic_def integer,
	tech integer,
	soldier_life_inc integer,
	soldier_attack_inc integer,
	soldier_physic_def_inc integer,
	soldier_magic_def_inc integer,
	skills VARCHAR(4096),
	is_physic tinyint(1),
	is_woman tinyint(1),
	type integer,
	hero_equip_id bigint,
	supported_equip_types VARCHAR(1024),
	default_soldier bigint
);

create table hero_soldiers (hero_id bigint not null, soldiers_id bigint not null);

create table soldier (
	id bigint generated by default as identity, 
	name VARCHAR(255),
	attack integer not null, 
	life integer not null, 
	magic_def integer not null, 
	physic_def integer not null, 
	soldier_type integer not null,
	skills VARCHAR(4096),
	is_physic tinyint(1),
	primary key (id)
);

create table action (
	id bigint generated by default as identity, 
	coefficient double, 
	direct tinyint(1), 
	hit_time integer, 
	name varchar(255), 
	range integer, 
	skills varchar(255), 
	is_physic tinyint(1),
	primary key (id));

 create table equip (
	 id bigint generated by default as identity, 
	 name varchar(255), 
	 attack_skill integer not null, 
	 intel_skill integer not null, 
	 life_skill integer not null, 
	 magic_def_skill integer not null, 
	 physic_def_skill integer not null,
	 tech_skill integer not null, 
	 equip_type varchar(64), 
	 skills varchar(255),
	 primary key (id)
 );
 
create table equip_type (
	id bigint generated by default as identity, 
	attack integer not null, 
	intel integer not null, 
	life integer not null, 
	magic_def integer not null, 
	name varchar(255), 
	part varchar(64), 
	physic_def integer not null, 
	tech integer not null, 
	primary key (id)
);

create table hero_actions (hero_id bigint not null, actions_id bigint not null);

create table hero_equip_types (hero_id bigint not null, equip_types_id bigint not null);


INSERT INTO player(name, server) VALUES
('朱老板','羁绊之地'),
('黑豆','羁绊之地'),
('兔兔和土豆','羁绊之地'),
('兔子白','羁绊之地'),
('长腿','羁绊之地'),
('神奇白','卡尔萨斯'),
('上官敏儿','米拉港' ),
('特工','羁绊之地'),
('琳雪','羁绊之地'),
('不是山谷','羁绊之地');

INSERT INTO hero(id, name, life, attack, intel, physic_def, magic_def, tech, soldier_life_inc, soldier_attack_inc,  
soldier_physic_def_inc, soldier_magic_def_inc, is_physic, is_woman, default_soldier, type,  supported_equip_types,  skills) VALUES
(1,'帕希尔',3548,271,520,258,312,104,30,35,15,20,0,1,1,7,'1,12,15,16,17,21,22,23', '1,1001,1101'),
(2,'托娃',4168,527,240,305,302,166,30,30,40,15,1,1,3,5,'5,6,12,15,18,19,20,21,22,23','2,1001,1101'),
(63,'古巨拉',5442,412,247,317,285,124,40,15,35,10,1,0,4,4,'4,7,12,15,18,19','3011,1101'),
(62,'泽瑞达',3723,534,240,288,281,331,10,40,10,40,1,1,5,7,'8,12,15,22,23','3,4,301,1002,1101')
;


INSERT INTO soldier(id, name, life ,attack, physic_def,  magic_def, soldier_type, is_physic, skills) VALUES
(1, '魔女', 583, 677, 297, 468, 8, 0, '2001'),
(2, '魔晶术士', 723, 630, 375,328, 8, 0, '2002'),
(3, '皇家狮鹫', 677,754, 344,390, 5, 1, '2003'),
(4, '龙虾巨兽', 723,630, 437,282, 4, 1, '2004'),
(5, '火焰骷髅弓手', 609,706, 359,342, 9, 1, '')
;


INSERT INTO hero_soldiers(hero_id, soldiers_id) VALUES
(1, 1),(1, 2),(2, 3),(62,5),(63,4);

INSERT INTO action(id, name, coefficient, direct, range,  hit_time, is_physic, skills) VALUES 
(10001,'物理普攻',1,0,0,1500,1,''),
(10002,'魔法普攻',1,0,0,1500,0,''),
(1,'嗜梦',1.5,0,2,500,0,'1601'),
(2,'绝命一击',1.4,1,2,300,1,'1602'),
(3,'优势打击',1.5,0,1,1300,1,'1603'),
(4,'自由之刃',1.4,0,1,1300,1,'1604');
;

INSERT INTO hero_actions(hero_id, actions_id) VALUES
(1, 1),(1, 10002),(62,10001),(62,2),(2,10001),(2,3);

INSERT INTO equip_type(id, name, life, attack, intel, physic_def, magic_def, tech, part) VALUES
(1,'Wand', 437, 0, 107, 0, 0, 0, 'Weapon'),
(2,'HeavySword', 437, 107, 0, 0, 0, 0, 'Weapon'),
(3,'LightSword', 0, 107, 0, 0, 0, 43, 'Weapon'),
(4,'Dagger', 0, 96, 0, 0, 0, 53, 'Weapon'),
(5,'Axe', 363, 118, 0, 0, 0, 0, 'Weapon'),
(6,'Spear', 583, 85, 0, 0, 0, 0, 'Weapon'),
(7,'Bow',0, 107, 0, 0, 0, 43, 'Weapon'),
(8,'PhysicHammer', 583, 85, 0, 0, 0, 0,'Weapon'),
(9,'MagicHammer', 583, 0, 85, 0, 0, 0, 'Weapon'),

(10,'HeavyArmor', 437, 0, 0, 65, 0, 0, 'Armor'),
(11,'LightArmor', 583, 0, 0, 54, 0, 0, 'Armor'),
(12,'LeatherArmor',  509, 0, 0, 59, 0, 0, 'Armor'),

(13,'HeavyHelm', 583, 0, 0, 0, 48, 0, 'Helmet'),
(14,'LightHelm', 364, 0, 0, 0, 65, 0, 'Helmet'),
(15,'LeatherHelm',437, 0, 0, 0, 59, 0, 'Helmet'),

(16,'Jewelry1', 509, 0, 75, 0, 0, 0, 'Jewelry'),
(17,'Jewelry3', 0, 0, 75, 0, 43, 0,'Jewelry'),

(18,'Jewelry2', 509, 75, 0, 0, 0, 0, 'Jewelry'),
(19,'Jewelry4', 0, 75, 0, 43, 0, 0, 'Jewelry'),
(20,'Jewelry7', 0, 75, 0, 0, 0, 37, 'Jewelry'),

(21,'Jewelry5',  0, 75, 75, 0, 0, 0 , 'Jewelry'),
(22,'Jewelry6', 0, 0, 0, 48, 43, 0 , 'Jewelry'),
(23,'Jewelry6', 509, 0, 0, 48, 0, 0 , 'Jewelry');


INSERT INTO equip(id, name, life_skill, attack_skill, intel_skill, physic_def_skill, magic_def_skill, tech_skill, equip_type, skills) VALUES
(1,'最后之服',0,0,0,10,0,0, 12,'1101'),
(2,'逸才权杖',5,0,0,0,0,0, 1,''),
(3,'尼约德的羽冠',10,0,0,0,0,0, 15,''),
(4,'星之耳坠',0,0,8,0,0,0, 16,''),
(5,'拉格纳罗克',0,10,0,0,0,0,5,''),
(6,'神翼护胫',0,0,0,10,0,0,19,'');

INSERT INTO hero_equip_types(hero_id, equip_types_id) VALUES
(1,1),(1,12),(1,15),(1,16),(1,17),(1,21),(1,22),(1,23),
(2,5),(2,6),(2,12),(2,15),(2,18),(2,19),(2,20),(2,21),(2,22),(2,23),
(62,4),(62,7),(62,12),(62,15),(62,18),(62,19),(62,20),(62,21),(62,22),(62,23),
(63,8),(63,12),(63,15),(63,22),(63,23);

