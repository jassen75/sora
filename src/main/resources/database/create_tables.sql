
use sora;

DROP TABLE if exists record;
DROP TABLE if exists role;
DROP TABLE if exists player;
DROP TABLE if exists hero_equip;
DROP TABLE if exists hero_soldiers;
DROP TABLE if exists hero;
DROP TABLE if exists soldier;


CREATE TABLE IF NOT EXISTS player (
	id BIGINT AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(64),
	server VARCHAR(64)
);


CREATE TABLE IF NOT EXISTS record (
	id BIGINT AUTO_INCREMENT PRIMARY KEY,
	player1 bigint not null,
	player2 bigint not null,
	score1 integer,
	score2 integer,
	season_id bigint not null,
	record_group integer,
	stage integer,
	map integer,
	match_time timestamp not null,
	video_id bigint
);

CREATE TABLE IF NOT EXISTS season (
	id BIGINT AUTO_INCREMENT PRIMARY KEY,
	number integer,
	match_type VARCHAR(64),
	status integer, 
	start_time timestamp
);

CREATE TABLE IF NOT EXISTS video (
	id bigint AUTO_INCREMENT PRIMARY KEY,
	video_type integer,
	info VARCHAR(512)
);

CREATE TABLE IF NOT EXISTS role (
	id bigint AUTO_INCREMENT PRIMARY KEY,
	season_id bigint not null,
	player_id bigint not null,
	name VARCHAR(255)
);



CREATE TABLE IF NOT EXISTS hero (
	id bigint AUTO_INCREMENT PRIMARY KEY,
	name VARCHAR(255),
	life integer,
	attack integer,
	intel integer,
	physic_def integer,
	magic_def integer,
	tech integer,
	soldier_life_inc integer,
	soldier_attack_inc integer,
	soldier_physic_def_inc integer,
	soldier_magic_def_inc integer,
	is_physic tinyint(1)

);

create table hero_soldiers (hero_id bigint not null, soldiers_id bigint not null);

create table soldier (
	id bigint generated by default as identity, 
	name VARCHAR(255),
	attack integer not null, 
	life integer not null, 
	magic_def integer not null, 
	physic_def integer not null, 
	soldier_type integer not null,
	primary key (id)
);

create table buff (
	id bigint AUTO_INCREMENT PRIMARY KEY,
	 buff_type integer not null, 
	 condition integer not null, 
	 name varchar(255), 
	 number double not null, 
	 scope integer not null, 
	 hero_id bigint
 );
 
 create table soldier_buff (
	id bigint AUTO_INCREMENT PRIMARY KEY,
	 buff_type integer not null, 
	 condition integer not null, 
	 name varchar(255), 
	 number double not null, 
	 scope integer not null, 
	 soldier_id bigint
 );
 
 create table hero_equip(
	 id bigint AUTO_INCREMENT PRIMARY KEY,
	 attack_inc integer not null,
	 attack_skill integer not null, 
	 attack_jjc integer not null,
	 life_inc integer not null, 
	 life_skill integer not null, 
	 life_jjc integer not null, 
	 magic_def_inc integer not null, 
	 magic_def_skill integer not null, 
	 magic_def_jjc integer not null, 
	 physic_def_inc integer not null, 
	 physic_def_skill integer not null, 
	 physic_def_jjc integer not null, 
	 intel_inc integer not null, 
	 intel_skill integer not null, 
	 intel_jjc integer not null, 
	 hero_id bigint
 );

INSERT INTO player(name, server) VALUES
('朱老板','羁绊之地'),
('黑豆','羁绊之地'),
('兔兔和土豆','羁绊之地'),
('兔子白','羁绊之地'),
('长腿','羁绊之地'),
('神奇白','卡尔萨斯'),
('上官敏儿','米拉港' ),
('特工','羁绊之地'),
('琳雪','羁绊之地'),
('不是山谷','羁绊之地');

INSERT INTO hero(id, name, life, attack, intel, physic_def, magic_def, tech, soldier_life_inc, soldier_attack_inc,  soldier_physic_def_inc, soldier_magic_def_inc, is_physic) VALUES
(1,'帕希尔',3548,271,520,258,312,104,30,35,15,20,0),
(2,'托娃',4168,527,240,305,302,166,30,30,40,15,1);


INSERT INTO soldier(id, name, life ,attack, physic_def,  magic_def, soldier_type) VALUES
(1, '魔女', 583, 677, 297, 468, 8),
(2, '魔晶术士', 723, 630, 375,328, 8),
(3, '皇家狮鹫', 677,754, 344,390, 5);


INSERT INTO buff(name,condition,buff_type, number, scope, hero_id) VALUES
('帕希尔天赋',-1,7,30, 3,1);

INSERT INTO soldier_buff(name,condition,buff_type, number, scope, soldier_id) VALUES
('魔女100%血',-1,1,45,2,1),
('魔女100%血',-1,3,45,2,1);

INSERT INTO hero_soldiers(hero_id, soldiers_id) VALUES
(1, 1),(1, 2),(2, 3);

INSERT INTO hero_equip(hero_id,attack_inc,life_inc, physic_def_inc,  magic_def_inc, intel_inc, attack_skill, life_skill, physic_def_skill, magic_def_skill, intel_skill, attack_jjc, life_jjc,  physic_def_jjc, magic_def_jjc, intel_jjc) VALUES
(1,14,3357,184,59,449,0,15,10,0,8,0,452,39,0,60),
(2,513,2526,220,59,12,18,10,10,0,0,58,412,45,0,0);
